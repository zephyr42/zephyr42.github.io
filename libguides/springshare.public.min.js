/*! springshare 1.11.0 */
var springSpace=springSpace||{};springSpace["public"]={},springSpace["public"]._construct=function(){function a(a){this.constant=springSpace.Util.setProp(a.constant,null),this.script_name=springSpace.Util.setProp(a.script_name,0),this.guide_id=springSpace.Util.setProp(a.guide_id,0),this.page_id=springSpace.Util.setProp(a.page_id,0),this.guide_friendly_name=springSpace.Util.setProp(a.guide_friendly_name,""),this.page_friendly_name=springSpace.Util.setProp(a.page_friendly_name,""),this.login_status=null}a.prototype.loadHomepageList=function(a){key=springSpace.Util.setProp(a.key,0),type_id=springSpace.Util.setProp(a.type_id,0),group_id=springSpace.Util.setProp(a.group_id,0),owner_id=springSpace.Util.setProp(a.owner_id,0),type_label=springSpace.Util.setProp(a.type_label,"Guides"),num_cols=springSpace.Util.setProp(a.num_cols,""),display_sort=springSpace.Util.setProp(a.display_sort,!1),jQuery(".s-lg-index-nav-btn").removeClass("active"),jQuery("#"+a.button_id).addClass("active"),jQuery("#s-lg-guide-list-controls").hide(),jQuery("#"+a.elt_id).html('<div class="bold s-lib-color-lt-grey pad-top-med">Loading...</div>'),springSpace.homepage.current_list!==a.action&&(springSpace.homepage.current_list=a.action,springSpace.homepage.current_btn_id=a.button_id,springSpace.homepage.current_num_cols=num_cols,springSpace.homepage.current_type_label=type_label||jQuery("#s-lg-index-label").html()),xhr=jQuery.ajax({url:"/index_process.php",data:{action:a.action,key:key,order:a.order,type_id:type_id,owner_id:owner_id,group_id:group_id,num_cols:springSpace.homepage.current_num_cols,search:jQuery("#s-lg-guide-search").val()},type:"GET",dataType:"json",success:function(b){200==b.errCode&&(1==b.data.reload_ui?top.window.document.location.reload():(jQuery("#"+a.elt_id).html(b.data.content),jQuery("#s-lg-index-list-header").html(b.data.list_header),jQuery("#form-group-s-lg-guide-order").toggle(display_sort),jQuery("#s-lg-guide-list-controls").show(),springSpace.UI.xhrPopover()))},error:function(a,b,c){alert("Oops, sorry! Something unexpected happened: "+c+" \n\nThat might not mean much to you, but it probably does to the Springy Techs...you can let them know at support@springshare.com.")}})},a.prototype.getAzFilterValues=function(a){return{first:springSpace.Util.setProp(a.first,springSpace.azList.letter_selected),subject_id:springSpace.Util.setProp(a.subject_id,jQuery("#s-lg-sel-subjects").val()),type_id:springSpace.Util.setProp(a.type_id,jQuery("#s-lg-sel-az-types").val()),vendor_id:springSpace.Util.setProp(a.vendor_id,jQuery("#s-lg-sel-az-vendors").val()),search:springSpace.Util.setProp(a.search,jQuery("#s-lg-az-search").val()),site_id:a.site_id}},a.prototype.filterAzByFirst=function(a,b){springSpace.azList.letter_selected=a,jQuery(".s-lg-az-first").removeClass("bold"),jQuery("#s-lg-az-first-"+a).addClass("bold"),this.loadAzList(this.getAzFilterValues({first:a,site_id:b}))},a.prototype.filterAzBySubject=function(a,b){this.loadAzList(this.getAzFilterValues({subject_id:a,site_id:b})),"0"==jQuery("#s-lg-sel-subjects").val()&&clearAzSelection("s-lg-sel-subjects")},a.prototype.filterAzByType=function(a,b){this.loadAzList(this.getAzFilterValues({type_id:a,site_id:b})),"0"==jQuery("#s-lg-sel-az-types").val()&&clearAzSelection("s-lg-sel-az-types")},a.prototype.filterAzByVendor=function(a,b){this.loadAzList(this.getAzFilterValues({vendor_id:a,site_id:b})),"0"==jQuery("#s-lg-sel-az-vendors").val()&&clearAzSelection("s-lg-sel-az-vendors")},a.prototype.filterAzBySearch=function(a){this.loadAzList(this.getAzFilterValues({search:jQuery("#s-lg-az-search").val(),site_id:a}))},a.prototype.clearAzSelection=function(a){jQuery("#"+a).val("").trigger("chosen:updated")},a.prototype.toggleAzClearButton=function(a){var b=""!==a.first||""!==a.subject_id||""!==a.type_id||""!==a.search||""!==a.vendor_id;jQuery("#s-lg-az-reset").toggle(b)},a.prototype.toggleAzSubjectBoxes=function(a){var b=""!=a.subject_id;jQuery("#s-lg-az-experts-div").html(""),jQuery("#s-lg-az-guides-div").html("");var c=this;b&&(xhr=jQuery.ajax({url:"/az_process.php",type:"GET",dataType:"json",data:{action:a.action,subject_id:a.subject_id,site_id:a.site_id,is_widget:springSpace.azList.is_widget,key:"auth_key"},success:function(a){200==a.errCode&&(jQuery("#s-lg-az-experts-div").html(a.data.experts),jQuery("#s-lg-az-guides-div").html(a.data.guides)),1==springSpace.azList.is_widget&&c.transformAzLinks()},error:function(a,b,c){springSpace.UI.error(c)}})),jQuery("#s-lg-az-trials-div").toggle(!b),jQuery("#s-lg-az-experts-div").toggle(b),jQuery("#s-lg-az-guides-div").toggle(b)},a.prototype.displayAzShareAlert=function(a){btn_text=a.btn_text,xhr=jQuery.ajax({url:"/az_process.php",type:"POST",dataType:"json",data:{action:a.action,id:a.id,name:a.name,site_id:a.site_id,key:"auth_key"},success:function(b){200==b.errCode?(springSpace.UI.alert({title:a.name,width:"550",height:"auto",content:b.data.html,buttons:{btn_text:function(){jQuery("#s-lib-alert").dialog("close"),jQuery("#s-lib-alert-content").html("")}}}),jQuery("#s-lib-alert-btn-first").html(a.btn_text)):springSpace.UI.error(b.errText)},error:function(a,b,c){springSpace.UI.error(c)}})},a.prototype.shareAzViaEmail=function(a){return jQuery("#form-msg-share_email").hide(),springSpace.Validation.email({val:jQuery("#share_email").val(),allow_empty:!1})?(springSpace.UI.disableButton({btn_id:"share_email_btn"}),springSpace.UI.notify({mode:"load",duration:3e4}),void(xhr=jQuery.ajax({url:"/az_process.php",type:"POST",dataType:"json",data:{action:a.action,content_id:jQuery("#share_content_id").val(),email:jQuery("#share_email").val(),site_id:a.site_id,key:"auth_key"},success:function(a){200==a.errCode?1==a.data.email_result&&(springSpace.UI.notify({mode:"success",duration:springSpace.UI.CONST.conf_close_delay}),setTimeout(function(){springSpace.UI.closeAlert()},springSpace.UI.CONST.conf_close_delay)):springSpace.UI.error(a.errText)},error:function(a,b,c){springSpace.UI.error(c)}}))):(jQuery("#form-msg-share_email").html(a.err_text).toggle(!0),!1)},a.prototype.loadAzList=function(a){jQuery("#s-lg-az-result-count").html('<div class="bold s-lib-color-lt-grey">Loading...</div>'),jQuery("#s-lg-az-content").html(""),a="undefined"==typeof a?{first:"",subject_id:"",search:""}:a,jQuery.each(["subject_id","type_id","vendor_id","first","search"],function(b,c){a[c]||(a[c]="")}),""==a.subject_id&&this.clearAzSelection("s-lg-sel-subjects"),""==a.type_id&&this.clearAzSelection("s-lg-sel-az-types"),""==a.vendor_id&&this.clearAzSelection("s-lg-sel-az-vendors"),""==a.search&&jQuery("#s-lg-az-search").val(""),this.toggleAzClearButton(a),this.toggleAzSubjectBoxes({subject_id:a.subject_id?a.subject_id:"",action:521,site_id:a.site_id});var b=this,c=function(a,b,c){"undefined"!=typeof b&&"undefined"!=typeof c&&0!=b&&a.push(c)},d=[];c(d,jQuery("#s-lg-sel-subjects").val(),jQuery("#s-lg-sel-subjects option:selected").text()),c(d,jQuery("#s-lg-sel-az-types").val(),jQuery("#s-lg-sel-az-types option:selected").text()),c(d,jQuery("#s-lg-sel-az-vendors").val(),jQuery("#s-lg-sel-az-vendors option:selected").text());var e=(d.length>0?": ":"")+d.join(": ");c(d,jQuery("#s-lg-az-search").val(),jQuery("#s-lg-az-search").val());var f=d.join("; ");jQuery("#s-lib-public-header-title").html(title_base+e),xhr=jQuery.ajax({url:"/az_process.php",type:"GET",dataType:"json",data:{action:520,first:a.first,subject_id:a.subject_id,type_id:a.type_id,vendor_id:a.vendor_id,content_id:a.content_id?a.content_id:0,search:a.search,site_id:a.site_id,is_widget:springSpace.azList.is_widget,key:"auth_key"},success:function(c){history.pushState&&0==springSpace.azList.is_widget&&"back"!==a.action&&"init"!==a.action&&history.pushState({},null,location.pathname+encodeURI(b.buildAzQs(a))),springSpace.azList.historyEdited=!0,springSpace.azList.selectLetter(a.first),200==c.errCode?(jQuery("#s-lg-az-content").html(c.data.html),jQuery("#s-lg-az-result-count").html(c.data.list_count+(f.length>0?" for "+f:"")),c.data.az_index_html&&(jQuery("#s-lg-az-index").html(c.data.az_index_html),springSpace.azList.selectLetter(a.first)),c.data.subjects_html&&jQuery("#col-subjects").html(c.data.subjects_html),c.data.az_types_html&&jQuery("#col-types").html(c.data.az_types_html),c.data.az_vendors_html&&jQuery("#col-vendors").html(c.data.az_vendors_html),jQuery(".chosen-select").chosen({search_contains:!0})):jQuery("#s-lg-az-content").html('Something unexpected happened - please try again and if you continue to receive the error please let us know.<div class="s-ghost" style="margin-top:20px;">'+c.errText+"</div>"),springSpace.UI.initPopOvers(),1==springSpace.azList.is_widget&&b.transformAzLinks(),jQuery("#s-lg-az-trials-loading").toggle(!1),jQuery("#s-lg-az-trials").toggle(!0)},error:function(a,b,c){springSpace.UI.error(c)}})},a.prototype.buildAzQs=function(a){var b={a:springSpace.Util.setProp(a.first,""),s:springSpace.Util.setProp(a.subject_id,""),v:springSpace.Util.setProp(a.vendor_id,""),t:springSpace.Util.setProp(a.type_id,""),q:springSpace.Util.setProp(a.search,"")},c=[];return jQuery.each(b,function(a,b){""!==b&&"0"!==b&&c.push(a+"="+b)}),0==c.length?"":"?"+c.join("&")},a.prototype.transformAzLinks=function(){jQuery(".s-lg-az-result-title a, .s-lib-featured-profile-image a, #s-lg-az-guides-div a").each(function(){jQuery(this).attr("target","_blank")}),jQuery(".s-lg-az-result-title a, .s-lib-featured-profile-image a").each(function(){var a=jQuery(this).attr("href"),b=/^https?:\/\/|^\/\//i;0==b.test(a)&&jQuery(this).attr("href","http://"+springSpace.azList.site_domain+a)})},this.Public=a},springSpace["public"]._construct(),jQuery(document).ready(function(){jQuery(window).scroll(function(){jQuery(this).scrollTop()>220?jQuery("#s-lib-scroll-top").fadeIn(750):jQuery("#s-lib-scroll-top").fadeOut(750)}),jQuery("#s-lib-scroll-top").click(function(a){return a.preventDefault(),jQuery("html, body").animate({scrollTop:0},750),!1})});